# Railway/Nixpacks: Node 20.19+ для Prisma (20.18.x не поддерживается)
# Nixpacks принимает только мажорные версии — для 20.19+ нужен nixpkgsArchive
[phases.setup]
nixpkgsArchive = "e84845a184ca3d7c3502d360fbe6d0522e06109f"
nixPkgs = ["nodejs_20"]

[variables]
NIXPACKS_NODE_VERSION = "20"

[phases.install]
cmds = ["npm install"]

[phases.build]
cmds = ["npx prisma generate", "npm run build"]

[start]
cmd = "npm run start"
