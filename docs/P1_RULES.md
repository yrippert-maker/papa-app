# Правила этапа P1

Документ фиксирует обязательные практики на время реализации BACKLOG_P1.

---

## 1. ADR

**Правило:** Любое изменение в области **policy**, **auth** или **storage** — только через ADR.

- ADR — короткий документ (1–2 страницы): контекст, решение, альтернативы.
- Шаблон: [ADR_TEMPLATE.md](ADR_TEMPLATE.md)
- Хранить в `docs/adr/` (например, `ADR-001-rbac-policy-layer.md`).
- Код, меняющий эти области без ADR — не мержится.

---

## 2. Формат демо M1–M3

- Для каждого milestone — проверяемые сценарии.
- Документ: [DEMO_SCENARIOS_M1_M3.md](DEMO_SCENARIOS_M1_M3.md)
- При демо заполнять таблицу «Ожидаемый код / Факт».
- Все сценарии прошли → milestone принят.

---

## 3. Владелец архитектуры

- На этап P1 назначается **владелец архитектуры** (architecture owner).
- Ответственность: соблюдение policy layer, RBAC, отсутствие ручных проверок прав в endpoint’ах.
- Участие в code review всех PR, затрагивающих auth, policy, API.
- **Право блокировать merge** при нарушении P1_RULES.
- Роль может совпадать с исполнителем, но должна быть **явно зафиксирована**.

*Если команда >1 человека:* Architecture owner не обязан писать весь код, но утверждает изменения в policy/auth/storage и ADR.

**Назначение (заполнить перед стартом):** Владелец: _______________ | Роль: _______________

---

## 4. M1 как gate

- Спринт 2 не стартует, пока M1 не достигнут.
- Если M1 не достижим в рамках спринта 1 — стоп, архитектурный разбор.

---

*Документ действует на протяжении этапа P1. Изменения — через отдельное решение.*
