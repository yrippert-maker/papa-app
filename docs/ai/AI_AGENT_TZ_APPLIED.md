# ТЗ для ИИ-агента ПАПА — Применение

**Источники:** папа-ю/ТЗ/ (доп общ, поиск ИИ, учеба ИИ, коннект ИИ, Buyer)  
**Дата:** 2026-02-02

---

## Анализ применимости

| ТЗ | Содержание | Применимость к papa-app |
|----|------------|--------------------------|
| **поиск ИИ** | Архитектура агента мониторинга, скоринг, дайджест | ✓ AI Inbox — обработка документов, рекомендации |
| **учеба ИИ** | Planner/Builder/Verifier, system prompt, CI | ✓ Разработка, код-ревью, автотесты |
| **доп общ** | Scorer, deps_graph, patches (poisk-ii) | △ Концепции скоринга применимы; код — Python, не Next.js |
| **коннект ИИ** | Online Research Fallback, anti-hallucination, sources | ✓ Правила защиты от галлюцинаций, confidence, формат ответа |
| **Buyer** | Data Room, Q&A для due diligence (папа-ю) | △ Справочник; принципы прозрачности уже в governance |

---

## 1. Скоринг для AI Inbox (из поиск ИИ)

При обработке документов в AI Inbox:

```
Score = 0.35·Relevance + 0.30·Impact + 0.20·Actionability + 0.15·Credibility
```

| Классификатор | Описание |
|---------------|----------|
| **Relevance** | Относится ли к стеку (Next.js, TMC, compliance) |
| **Impact** | security > breaking > perf > DX |
| **Actionability** | Есть ли конкретные шаги |
| **Credibility** | Уровень доверия к источнику |

**Правила приоритета:**
- Security advisory по зависимости → в топ
- Breaking change в фреймворке → в топ
- Community blog без подтверждения → не выше среднего

---

## 2. Формат рекомендации (из поиск ИИ)

Каждая находка → карточка:

- Заголовок / Тема
- Источник + дата
- Почему важно (impact)
- Кого касается (stack match)
- Что делать (action items)
- Пример (опционально)
- Риски/ограничения
- Ссылки

---

## 3. System prompt для агента (из учеба ИИ)

```
Роль: senior software engineer + CI enforcer.
Цель: создать/доработать программу по ТЗ, довести до зелёного CI.

Правила:
- Всегда начинай с PLAN.md (архитектура, файлы, критерии готовности).
- Всегда обновляй README.md (setup/run/test).
- Любая фича = код + тест.
- После изменений: npm run lint, npm test, npm run build.
- Не добавляй зависимости без явной причины.
- Итог: краткий отчёт "что сделано / как проверить".
```

---

## 4. Контур разработки (из учеба ИИ)

```
Готово = тесты проходят + линтер чистый + есть инструкция запуска

Loop:
1. Прочитай ТЗ → PLAN.md
2. Реализуй MVP
3. Добавь тесты
4. npm run lint && npm test && npm run build
5. Если упало — исправь, повторяй
6. CHANGELOG/отчёт
```

---

## 5. Защита от галлюцинаций (из поиск ИИ + коннект ИИ)

- Всегда хранить ссылку на источник.
- Правило: "нет источника — нет рекомендации" для важных изменений.
- Confidence: High (официальные release notes) / Medium (блоги) / Low (форумы — только сигнал).
- **Из коннект ИИ:** отвечай ТОЛЬКО на основе предоставленных источников; не выдумывай факты; если данных нет — предложи уточняющий запрос; confidence 0..1.

---

## 6. Online Research (из коннект ИИ)

При ответе на основе внешних источников (будущий online fallback, если появится):

- Отвечай ТОЛЬКО на основе предоставленных источников.
- Перечисли 2–5 наиболее релевантных URL, которые реально использовал.
- confidence: 0..1 (0.3 если источники слабые/противоречат).
- Не используй знания вне источников.

См. `config/ai-agent/anti-hallucination-rules.yaml`.

---

## 7. Buyer (справочник)

Buyer.docx — Data Room и Q&A для папа-ю. Принципы прозрачности, задокументированных рисков и «нет скелетов в шкафу» согласуются с governance papa-app (ASSURANCE.md, GOVERNANCE_CHARTER).

---

## 8. Конфигурация

См. `config/ai-agent/` — scoring, prompts, anti-hallucination, sources.
