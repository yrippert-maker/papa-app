{
  "name": "papa-app",
  "version": "1.0.0",
  "browserslist": [
    "defaults",
    "not ie <= 11",
    "not op_mini all"
  ],
  "private": true,
  "engines": {
    "node": ">=22.12.0"
  },
  "main": "electron/main.js",
  "scripts": {
    "dev": "next dev -p 3001",
    "dev:stable": "(rimraf .next/cache .next/server .next/static node_modules/.cache || true) && cross-env PORT=3001 next dev -p 3001",
    "dev:quick": "node scripts/check-database-url.mjs && next dev -p 3001",
    "dev:web": "cross-env PORT=3001 next dev -p 3001",
    "dev:full": "concurrently -n WEB,EL \"npm:dev:web\" \"wait-on http://127.0.0.1:3001 && npm run electron:dev\"",
    "electron:dev": "electron .",
    "electron:prep": "node electron/scripts/prep.js",
    "electron:prod": "npm run build && npm run electron:prep && cross-env ELECTRON_START=prod electron .",
    "electron:build": "npm run build && npm run electron:prep && npm run next-cache-check && electron-builder",
    "next-size-report": "node scripts/next-size-report.mjs",
    "next-cache-check": "node scripts/next-cache-check.mjs",
    "build": "next build",
    "typecheck": "tsc -p tsconfig.typecheck.json --noEmit",
    "ci:build": "npm ci && npx prisma generate && npm run build",
    "ci:check": "npm run lint && npm run typecheck",
    "check": "npm run check:root && npm run check:portal",
    "check:root": "npm run lint && npm run typecheck && npm run build",
    "check:portal": "npm --prefix apps/auditor-portal ci && npm --prefix apps/auditor-portal run build",
    "check:all": "node scripts/ci-check-all.mjs",
    "check:build-context": "node scripts/check-build-context.mjs",
    "prestart": "node scripts/prestart-check.mjs",
    "start": "next start -p ${PORT:-3000}",
    "prod:build": "next build",
    "prod:start": "cross-env NODE_ENV=production PORT=3001 next start -p 3001",
    "prod:smoke": "npm run prod:build && start-server-and-test \"npm run prod:start\" http://127.0.0.1:3001/api/health \"curl -fsS http://127.0.0.1:3001/api/health\"",
    "docker:smoke": "./scripts/smoke-docker.sh",
    "docker:build": "docker build --no-cache -t papa-app-build .",
    "diagnose:500": "rm -rf .next && node scripts/diagnose-500.mjs",
    "electron:smoke:pw": "cross-env SMOKE_ARTIFACTS_DIR=/tmp/electron-smoke ELECTRON_SKIP_SERVER=1 node scripts/electron-smoke.mjs",
    "electron:smoke": "start-server-and-test \"npm run dev:quick\" http://127.0.0.1:3001/api/health \"npm run electron:smoke:pw\"",
    "lint": "next lint --max-warnings=0",
    "lint:json": "node scripts/lint-package-json.mjs",
    "test": "jest --runInBand",
    "test:watch": "jest --watch --runInBand",
    "e2e": "npm run test:e2e",
    "test:e2e": "npm run build && node scripts/e2e-prepare.mjs && WORKSPACE_ROOT=.tmp/e2e-workspace npm run migrate && WORKSPACE_ROOT=.tmp/e2e-workspace npm run seed:admin && NEXTAUTH_SECRET=e2e-test-secret CI=true E2E_MODE=1 WORKSPACE_ROOT=.tmp/e2e-workspace bash scripts/run-e2e.sh",
    "test:e2e:playwright": "playwright test",
    "test:e2e:rbac": "PLAYWRIGHT_BASE_URL=http://localhost:3001 playwright test __tests__/e2e/rbac-middleware.spec.ts",
    "test:e2e:ui": "playwright test --ui",
    "e2e:run": "node scripts/e2e-smoke.mjs",
    "migrate": "node scripts/migrate.mjs up",
    "migrate:down": "node scripts/migrate.mjs down",
    "db:migrate": "node scripts/db-pg-migrate.mjs",
    "db:migrate:deploy": "prisma migrate deploy",
    "db:migrate:prod": "prisma migrate deploy && node scripts/db-pg-migrate.mjs",
    "db:status": "prisma migrate status",
    "db:pg:migrate": "node scripts/db-pg-migrate.mjs",
    "cloud:setup": "node scripts/cloud-db-setup.mjs",
    "db:up": "docker compose up -d postgres",
    "db:down": "docker compose down",
    "db:logs": "docker logs -f papa-postgres",
    "db:seed": "prisma db seed",
    "db:seed:supabase": "NODE_TLS_REJECT_UNAUTHORIZED=0 prisma db seed",
    "seed:admin": "node scripts/seed-admin.mjs",
    "check:db-imports": "bash scripts/check-no-direct-db-imports.sh",
    "check:admin-guards": "node scripts/check-admin-guards.mjs",
    "check:userrole-writes": "node scripts/check-no-userrole-writes.mjs",
    "bundle:regulatory": "bash scripts/create-regulatory-bundle.sh",
    "smoke:auth": "node scripts/smoke-auth.mjs",
    "smoke:nextauth-db": "node scripts/smoke-nextauth-db.mjs",
    "smoke:last-admin-invariant": "node scripts/smoke-last-admin-invariant.mjs",
    "preflight:prod": "node scripts/preflight-prod.mjs",
    "smoke:agent:perms": "node scripts/smoke-agent-perms.mjs",
    "smoke:agent:index": "node scripts/smoke-agent-index.mjs",
    "smoke:agent:outputs": "node scripts/smoke-agent-outputs.mjs",
    "smoke:agent": "npm run smoke:agent:perms && npm run smoke:agent:index && npm run smoke:agent:outputs",
    "db:immutable:on": "node scripts/immutable-enable.mjs",
    "db:immutable:off": "node scripts/immutable-disable.mjs",
    "db:import": "node scripts/import-docs.mjs",
    "replay:dead-letter": "node scripts/replay-ledger-dead-letter.mjs",
    "cleanup:dead-letter": "node scripts/cleanup-dead-letter.mjs",
    "retention:check": "node scripts/retention-enforce.mjs --dry-run",
    "retention:run": "node scripts/retention-enforce.mjs --execute",
    "retention:json": "node scripts/retention-enforce.mjs --dry-run --json",
    "retention:baseline:check": "node scripts/retention-check-baseline.mjs",
    "retention:baseline:update": "node scripts/retention-check-baseline.mjs --update",
    "audit:prune": "node scripts/audit-prune.mjs --days 180",
    "audit:prune:dry": "node scripts/audit-prune.mjs --days 180 --dry-run",
    "audit:snapshot:daily": "node scripts/generate-audit-snapshot.mjs --daily",
    "audit:snapshot:weekly": "node scripts/generate-audit-snapshot.mjs --weekly",
    "audit:snapshot:verify": "node scripts/verify-audit-snapshots.mjs --all",
    "expire:requests": "node scripts/expire-requests.mjs",
    "attestation:quarterly": "node scripts/generate-attestation.mjs --type quarterly",
    "attestation:annual": "node scripts/generate-attestation.mjs --type annual",
    "attestation:list": "node scripts/generate-attestation.mjs --list",
    "trust-anchors:export": "node scripts/export-trust-anchors.mjs",
    "trust-anchors:keys": "node scripts/export-trust-anchors.mjs --keys-only",
    "trust-anchors:list": "node scripts/export-trust-anchors.mjs --list",
    "verify:independent": "node scripts/independent-verify.mjs",
    "test:verify:fixtures": "node __tests__/scripts/independent-verify.test.mjs",
    "auditor-pack:create": "node scripts/create-auditor-pack.mjs",
    "governance-debt:check": "node scripts/governance-debt-check.mjs",
    "docs:index": "node scripts/docs-index.mjs",
    "docs:index:agent": "node scripts/docs-index-agent.mjs",
    "docs:index:agent:seed": "sqlite3 data/00_SYSTEM/db/papa.sqlite < scripts/seed-agent-index.sql && [ \"$(sqlite3 data/00_SYSTEM/db/papa.sqlite 'SELECT COUNT(*) FROM doc_metadata;')\" = \"2\" ] && echo 'Indexed: 2 documents, 2 chunks' || (echo 'Seed failed: expected 2 docs in doc_metadata'; exit 1)",
    "docs:index:pgvector": "npx tsx scripts/docs-index-pgvector.ts",
    "ai:orchestrate": "npx tsx scripts/ai-orchestrator/index.ts",
    "ai:plan": "node ai-engine/cli/index.mjs plan",
    "ai:build": "node ai-engine/cli/index.mjs build",
    "ai:verify": "node ai-engine/cli/index.mjs verify",
    "ai:ci-fix": "node ai-engine/cli/index.mjs ci-fix",
    "ai:review": "node ai-engine/cli/index.mjs review-pr",
    "agent:ingest:worker": "npx tsx scripts/agent-ingest-worker.ts",
    "templates:letter": "node scripts/create-letter-template.mjs",
    "templates:act": "node scripts/create-act-template.mjs",
    "templates:techcard": "node scripts/create-techcard-template.mjs",
    "monitor:run": "node scripts/monitor-run.mjs",
    "anchoring:run": "node scripts/anchoring-run.mjs",
    "anchoring:publish": "npx tsx scripts/anchoring-publish.ts",
    "anchoring:confirm": "npx tsx scripts/anchoring-confirm.ts",
    "anchoring:reconcile": "node scripts/anchoring-reconcile.mjs",
    "ledger:publish": "node scripts/ledger-publish.mjs",
    "ledger:rollup": "node scripts/ledger-rollup.mjs",
    "ledger:enrich": "node scripts/ledger-enrich.mjs",
    "ledger:pending:gc": "node scripts/config-ledger-gc.mjs",
    "health:alert": "node scripts/health-alert.mjs",
    "portal:api:dev": "node services/auditor-portal-api/src/server.mjs",
    "portal:ui:dev": "cd apps/auditor-portal && npm run dev",
    "portal:dev": "echo 'Run portal API + UI in separate terminals: npm run portal:api:dev && npm run portal:ui:dev'",
    "compliance:package": "node scripts/compliance-package.mjs",
    "compliance:package:v1": "node scripts/compliance-package.mjs --version compliance-v1",
    "compliance:report": "node scripts/generate-compliance-report.mjs",
    "compliance:demo": "node scripts/build-demo-compliance-package.mjs",
    "compliance:demo:from-pack": "node scripts/make-demo-from-pack.mjs",
    "evidence-kit:public": "node scripts/build-evidence-kit-public.mjs",
    "compliance:decision-diff": "node scripts/decision-diff.mjs",
    "mro:init": "node scripts/mro-init-folders.mjs",
    "mro:monitor": "node scripts/mro-monitor.mjs",
    "mail:ingest": "node scripts/mail-ingest.mjs",
    "mail:collect": "node scripts/mail-collector.mjs",
    "mail:triage": "node scripts/mail-triage-agent.mjs",
    "postinstall": "npx prisma generate --schema=prisma/schema.prisma"
  },
  "overrides": {
    "openai": {
      "zod": "$zod"
    }
  },
  "prisma": {
    "schema": "prisma/schema.prisma",
    "seed": "npx tsx prisma/seed.ts"
  },
  "dependencies": {
    "@aws-sdk/client-s3": "^3.645.0",
    "@google-cloud/storage": "^7.0.0",
    "@next-auth/prisma-adapter": "^1.0.7",
    "@prisma/adapter-pg": "^7.3.0",
    "@prisma/client": "^7.3.0",
    "@sentry/electron": "^5.12.0",
    "bcrypt": "^6.0.0",
    "bcryptjs": "^3.0.3",
    "better-sqlite3": "^12.6.2",
    "docxtemplater": "^3.52.0",
    "dotenv": "^17.2.3",
    "drizzle-orm": "^0.38.0",
    "electron-updater": "^6.3.9",
    "googleapis": "^140.0.0",
    "imapflow": "^1.0.165",
    "jszip": "^3.10.1",
    "mailparser": "^3.7.2",
    "nanoid": "^5.0.9",
    "next": "^14.2.35",
    "next-auth": "^4.24.13",
    "openai": "^4.73.0",
    "p-limit": "^6.1.0",
    "pdf-parse": "^2.4.5",
    "pg": "^8.18.0",
    "pgvector": "^0.2.1",
    "pizzip": "^3.1.7",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "zod": "^4.3.6"
  },
  "devDependencies": {
    "@playwright/test": "^1.58.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.2",
    "@types/bcrypt": "^6.0.0",
    "@types/bcryptjs": "^2.4.6",
    "@types/better-sqlite3": "^7.6.13",
    "@types/jest": "^30.0.0",
    "@types/node": "^20",
    "@types/pg": "^8.16.0",
    "@types/react": "^18",
    "@types/react-dom": "^18",
    "archiver": "^7.0.1",
    "autoprefixer": "^10.4.23",
    "concurrently": "^9.1.0",
    "cross-env": "^10.1.0",
    "drizzle-kit": "^0.30.0",
    "electron": "^40.1.0",
    "electron-builder": "^26.7.0",
    "eslint": "^8",
    "eslint-config-next": "14.2.35",
    "fast-glob": "^3.3.3",
    "jest": "^30.2.0",
    "jest-environment-jsdom": "^30.2.0",
    "postcss": "^8.5.6",
    "prisma": "^7.3.0",
    "rimraf": "^6.1.2",
    "start-server-and-test": "^2.1.3",
    "tailwindcss": "^3.4.1",
    "ts-jest": "^29.4.6",
    "tsx": "^4.19.0",
    "typescript": "^5",
    "viem": "^2.21.0",
    "wait-on": "^9.0.3"
  }
}
